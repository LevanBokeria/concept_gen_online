<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Fullscreen</title>
  <script src="jatos.js"></script>
  <script src='./jspsych-6.1.0/jspsych.js'></script>        
  <script src = "./extra_functions/jquery-3.4.1.js" type="text/javascript"></script>
  <script src='./jspsych-6.1.0/plugins/jspsych-fullscreen.js'></script>       
  <link href='./jspsych-6.1.0/css/jspsych.css' rel='stylesheet' type='text/css'></link>
</head>
<body style="background-color:#99a3a4;"></body>
<script>

    jatos.onLoad(function() {

        // Check if in fullscreen
        var element = document.fullscreenElement;

        if (element == null){
        
            var timeline = [];

            timeline.push({
                type: 'fullscreen',
                message: '<p>Please press "continue" to enter fullscreen mode. Please stay in fullscreen mode until the end of the experiment. </p>' + 
                        '<p>Once you are finished doing the study, press Esc to exit fullscreen mode.</p>' +
                        '<p>Thank you!</p>',
                fullscreen_mode: true
            });
            
            jsPsych.init({
                timeline: timeline,
                on_finish: function(data) {
                    // Start the next component
                    console.log('Executing finish')
                    jatos.startComponentByPos(1);
                }
            });
        
        } else {

            // Start the next component
            jatos.startComponentByPos(1);
        }

    });
</script>