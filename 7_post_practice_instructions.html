<!DOCTYPE html>
<html>
    <head>
        <title>post practice instructions</title>
        <script src="jatos.js"></script>
        <script src="./jspsych-6.1.0/jspsych.js"></script>
        <script src="./jspsych-6.1.0/plugins/jspsych-instructions.js"></script>
        <script src="./extra_functions/helper_functions.js"> </script>
        <link href="./jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
        <style>	body {background-color: #b9c6c7; font-family: sans-serif; color: black;} </style>
        <style> p {font-size: 100%; margin-top:0px; margin-right:20px; margin-bottom:10px; margin-left: 20px;} </style>
        <style> ul {font-size: 125%; margin-top:0px; margin-right:100px; margin-bottom:10px; margin-left: 100px; cursor:default;} </style>
        <style> .instruct{width:100%; color: black; text-align:center; cursor:default;} </style>
        <style> .header {width:100%; color: black; text-align: center;cursor:default;} </style>
    </head>
    <body></body>
    <script>
    
    
    jatos.onLoad(function() {

        [curr_phase,phase_string,curr_session] = getPhaseAndSession()

        let middle_sentence = {
            phase_1: '<p><b>If your learning score for each toy is '+ 
                jatos.studySessionData.training_criterion +'% or more, you will move to phase 2! </b></p>',
            phase_2: '<p><b>If your learning score for each toy is '+ 
                jatos.studySessionData.training_criterion +'% or more, you will move to phase 3! </b></p>',
            phase_3: '<p><b>If your learning score for each toy is ' +
                jatos.studySessionData.training_criterion +'% or more, you will move to the debriefing survey, ' +
                'after which the experiment is over! </b></p>',
        }


        var practice_trials_end = {
            type: "instructions",
            pages: [
                    '<div class= "header">'+
                        '<h1> Instructions </h1>'+
                    '</div>'+
                    '<div class="instruct">'+
                        '<p>This is the end of the practice trials. </p>' + 
                        '<p>You will now start the 1st session of phase '+ curr_phase +', with '+ 
                            + jatos.studySessionData.inputData.nTrials +
                            ' trials! </p>' +
                        middle_sentence[phase_string] +
                        '<p>If not, you will get more training sessions. </p>' +
                        '<p>Keep in mind, the scores reset at the start of each session! </p>' +
                    '</div>',

                    '<div class= "header">'+
                        '<h1> Instructions </h1>'+
                    '</div>'+
                    '<div class="instruct"> <br>'+
                        '<p>Please note that your responses are monitored automatically.</p>' +
                        '<p><strong>You might be disqualified during the study if you take too many sessions to learn or ' + 
                        ' if your responses have signs of inattention. </strong></p>' +
                        '<p>Your data is really important for our students and for understanding how the human brain learns.</p>' + 
                        '<p>Please be attentive and complete this game truthfully. Thank you so much!</p>' + 
                        '<p> Click next to start the 1st session! Good luck! </p>' +
                    '</div>',
            ],
            show_clickable_nav: true,
            button_label_next: "<span style='color: blue';> <strong> Next </stong></span>"

        };

        jsPsych.init({
            timeline: [practice_trials_end],
            on_finish: function(data) {


                // Make JATOS remember that this session was run
                jatos.studySessionData.latestFinishedComponentId  = jatos.componentId;
                jatos.studySessionData.latestFinishedComponentPos = jatos.componentPos;

                // result_data.component_data = jsPsych.data.get().values();

                // jatos.studySessionData.allData.post_practice_trials_instructions = result_data;

                jatos.submitResultData("[post_ex_trials_start---" + 
                JSON.stringify(jatos.studySessionData) +
                "---post_ex_trials_end]", jatos.startNextComponent);
            }
            
        });

    });


    </script>
</html>
